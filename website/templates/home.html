{% extends 'layout.html' %}

{% block title %}Home{% endblock %}


{% block content %}
<!-- Edit content here -->
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/home.css') }}" />


<!-- Include Scripts -->
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="{{ url_for('static', filename='js/datepicker_handler.js') }}"></script>
<script src="{{ url_for('static', filename='js/navbar_opacity.js') }}"></script>
<!-- Include jQuery UI -->
<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>


<div class="main-graphic" id="main-graphic">
    <img src="{{ url_for('static', filename='images/football_pitch_dark.jpg') }}", alt="Client main site image"/>
    <div class="img-overlay">
        <h1>
            reserve your time.
        </h1>
    </div>
</div>

<div class="search-bar-wrap" id="search-bar">
    <div class="search-bar">
        <input type="text" placeholder="What are you looking for today ?...">
        <!-- <input type="text" id="datepicker_1" placeholder="Select a date"> -->
        <button>search</button>
    </div>
</div>

<div class="container" id="container">
    {% for d in data %}
        <a href="/">
            <div class="facilities">
                <div class="facil_image">
                    {% if d['images'] %}
                        {% for img in d['images'] %}

                                <img src="{{ url_for('static', filename='images/' + img['image_path']) }}">
                                <!-- <img src="{{ url_for('static', filename='images/' + d['images'][0]['image_path']) }}"> -->
                                

                        {% endfor %}
                    {% else %}
                        <img src="{{ url_for('static', filename='images/no_image.jpg') }}" alt="no image available">
                    {% endif %}
                </div>
                <div class="facil_info">
                        <strong id="facil_name_strong">{{ d['name'] }}</strong>
                        <output>{{ d['address']['city']['name'] }}</output>
                        <output>{{ d['address']['street_name'] }} {{d['address']['building_number']}}</output>
                        <output>{{ d['address']['postal_code'] }}, {{ d['address']['state']['name'] }}</output>
                </div>

                {% if user_data.user_role.id_user_role == 2 %}
                <div class="reserve-btn">RESERVE</div>
                <form method="POST" action="/upload_facility_image" enctype="multipart/form-data">
                    <input type="file" name="file" accept=".jpg, .jpeg, .png, .gif">
                    <input type="submit" value="Upload">
                    <input type="hidden" name="id_facility" value="{{d.id_facility}}">
                </form>
                <form method="GET" action="/edit_facility">
                    <input type="submit" value="Edit">
                    <input type="hidden" name="id_facility" value="{{d.id_facility}}">
                </form>
                <form method="POST" action="/delete_facility">
                    <input type="submit" value="Delete">
                    <input type="hidden" name="id_facility" value="{{d.id_facility}}">
                </form>
                {% endif %}
            </div>
        </a>
    {% endfor %}
</div> 

{% endblock %}



